<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/julia-ml-course/libs/katex/katex.min.css"> <link rel=stylesheet  href="/julia-ml-course/libs/highlight/styles/github.min.css"> <link rel=stylesheet  href="/julia-ml-course/css/franklin.css"> <link rel=stylesheet  href="/julia-ml-course/css/poole_hyde.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 768px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <link rel=icon  href="/julia-ml-course/assets/favicon.png"> <title>Julia for Machine Learning</title> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <h1><a href="/julia-ml-course/">JuML</a></h1> <p class=lead > Julia Programming<br> for Machine Learning<br> SoSe 2025 @ TU Berlin.</p> </div> <div class=sidebar-nav-section >Course overview</div> <a class="sidebar-nav-item " href="/julia-ml-course/">General Information</a> <a class="sidebar-nav-item " href="/julia-ml-course/E1_Installation/">Installation</a> <a class="sidebar-nav-item " href="/julia-ml-course/E2_Help/">Getting Help</a> <div class=sidebar-nav-section >Julia basics</div> <a class="sidebar-nav-item " href="/julia-ml-course/L1_Basics_1/">Types, Functions & MD</a> <a class="sidebar-nav-item " href="/julia-ml-course/L2_Basics_2/">Arrays & Linear Algebra</a> <a class="sidebar-nav-item " href="/julia-ml-course/L4_Basics_3/">Custom Types</a> <div class=sidebar-nav-section >Julia ecosystem</div> <a class="sidebar-nav-item " href="/julia-ml-course/L3_Plotting/">Plotting & DataFrames</a> <a class="sidebar-nav-item " href="/julia-ml-course/L5_Machine_Learning/">Machine Learning</a> <a class="sidebar-nav-item " href="/julia-ml-course/L6_Automatic_Differentiation/">Automatic Differentiation</a> <a class="sidebar-nav-item " href="/julia-ml-course/L7_Deep_Learning/">Deep Learning</a> <div class=sidebar-nav-section >Workflows</div> <a class="sidebar-nav-item " href="/julia-ml-course/overview/">Overview</a> <a class="sidebar-nav-item " href="/julia-ml-course/environments/">Environments</a> <a class="sidebar-nav-item " href="/julia-ml-course/repl/">Enhancing the REPL</a> <a class="sidebar-nav-item " href="/julia-ml-course/setup/">Setting up a Package</a> <a class="sidebar-nav-item " href="/julia-ml-course/write/">Writing a Package</a> <a class="sidebar-nav-item " href="/julia-ml-course/test/">Testing</a> <a class="sidebar-nav-item " href="/julia-ml-course/git/">Hosting on GitHub</a> <a class="sidebar-nav-item " href="/julia-ml-course/docs/">Documentation</a> <a class="sidebar-nav-item active" href="/julia-ml-course/debugging/">Debugging</a> <a class="sidebar-nav-item " href="/julia-ml-course/profiling/">Profiling</a> <a class="sidebar-nav-item " href="/julia-ml-course/scripts/">Scripts & Experiments</a> <a class="sidebar-nav-item " href="/julia-ml-course/common-mistakes/">Common Mistakes</a> <div class=sidebar-nav-section >Homework</div> <a class="sidebar-nav-item " href="/julia-ml-course/H1_Basics/">Week 1</a> <a class="sidebar-nav-item " href="/julia-ml-course/H2_Linear_Algebra/">Week 2</a> <a class="sidebar-nav-item " href="/julia-ml-course/H3_Custom_Types/">Week 3</a> <a class="sidebar-nav-item " href="/julia-ml-course/H4_Deep_Learning/">Week 4</a> </nav> <br> </div> </div> <div class="content container"> <div class=franklin-content ><h1 id=debugging_logging ><a href="#debugging_logging" class=header-anchor >Debugging &amp; Logging</a></h1> <p>In this lesson, we are going to take a look at debugging and profiling. Since type inference is central to writing performant Julia code, we will also take a look at how to fix inference problems.</p> <p>We will demonstrate both the Julia VSCode extension and editor-agnostic packages.</p> <p> <h2>Table of Contents</h2> <div class=franklin-toc ><ol><li><a href="#problem_setting">Problem setting</a><li><a href="#debugging">Debugging</a><ol><li><a href="#vscode_extension">VSCode extension</a><li><a href="#debuggerjl">Debugger.jl</a><li><a href="#infiltratorjl">Infiltrator.jl</a></ol><li><a href="#logging">Logging</a><ol><li><a href="#enabling_debug_messages">Enabling <code>@debug</code> messages</a><li><a href="#saving_logs_to_a_file">Saving logs to a file</a></ol><li><a href="#acknowledgements">Acknowledgements</a></ol></div></p> <h2 id=problem_setting ><a href="#problem_setting" class=header-anchor >Problem setting</a></h2> <p>Let&#39;s assume we want to compute the sum of <a href="https://mathworld.wolfram.com/ProperDivisor.html">proper divisors</a> of some integer <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>.</p> <p>As an example, the proper divisors of 4 are the numbers 1 and 2, but not 4 itself. The sum of the proper divisors of 4 is therefore 1 &#43; 2 &#61; 3.</p> <p>Assume you want to debug the following implementation</p> <pre><code class="julia hljs"><span class=hljs-keyword >function</span> sum_of_divisors(n)
    proper_divisors = filter(x -&gt; n % x == <span class=hljs-number >0</span>, <span class=hljs-number >1</span>:n)
    <span class=hljs-keyword >return</span> sum(proper_divisors)
<span class=hljs-keyword >end</span></code></pre> <p>which currently returns the wrong result for <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">n = 4</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:0.6444em;"></span><span class=mord >4</span></span></span></span>:</p> <pre><code class="julia-repl hljs">sum_of_divisors(4) # ⚠️ should return 3, but returns 7
7</code></pre> <h2 id=debugging ><a href="#debugging" class=header-anchor >Debugging</a></h2> <h3 id=vscode_extension ><a href="#vscode_extension" class=header-anchor >VSCode extension</a></h3> <p>Using the Julia VSCode extension, we can click on the left on the left-most column of an editor pane to add a <em>breakpoint</em>, which is visualized by a red circle. This can be seen under point 1 in the following screenshot:</p> <p><img src="/julia-ml-course/assets/vscode_debug.png" alt="VSCode debugging" /></p> <p>By going into the Debugging pane of the Julia VSCode extension &#40;point 2&#41;, we can click <em>Run and Debug</em> to start the debugger.</p> <p>The program will automatically pause at the first breakpoint. Using the toolbar &#40;point 3&#41; at the top of the editor, we can <em>continue</em>, <em>step over</em>, <em>step into</em> and <em>step out</em> of our code.</p> <p>On the left pane, we can see the local variables inside of the current function as well as their current values &#40;point 4&#41;. Not shown on the screenshot is additional information like the call stack of the function.</p> <p>Using the information from the variables viewer, we can see that <code>sum_of_divisors&#40;4&#41;</code> incorrectly computes the list of proper divisors <code>&#91;1, 2, 4&#93;</code> instead of the expected <code>&#91;1, 2&#93;</code>. This might help us figure out that the bug is in the range of our for-loop: inside <code>filter</code>, we should iterate over <code>1:&#40;n-1&#41;</code> instead of <code>1:n</code>.</p> <div class="admonition tip"> <p class=admonition-title >Tip</p> <p>Check out the <a href="https://www.julia-vscode.org/docs/stable/userguide/debugging/">debugging documentation</a> of the Julia VSCode extension for more information.</p> </div> <h3 id=debuggerjl ><a href="#debuggerjl" class=header-anchor >Debugger.jl</a></h3> <p>If you prefer to work with other editors, <a href="https://github.com/JuliaDebug/Debugger.jl">Debugger.jl</a> is one of several alternative debuggers in Julia.</p> <p>Using the <code>@enter</code> macro, we can enter a function call and step through it. The prompt changes to <code>1|debug&gt;</code>, indicating Debugger-mode, and we can use <a href="https://github.com/JuliaDebug/Debugger.jl#debugger-commands">Debugger.jl&#39;s custom commands</a> to move through our code. The list of commands can be also be shown by typing <code>help</code> in Debugger-mode.</p> <pre><code class="julia-repl hljs"><span class="hljs-meta prompt_">julia&gt;</span><span class=language-julia > <span class=hljs-keyword >using</span> Debugger 
</span>
<span class="hljs-meta prompt_">julia&gt;</span><span class=language-julia > <span class=hljs-meta >@enter</span> sum_of_divisors(<span class=hljs-number >4</span>)
</span>In sum_of_divisors(n) at REPL[11]:1
 1  function sum_of_divisors(n)
&gt;2      proper_divisors = filter(x -&gt; n % x == 0, 1:n)
 3      return sum(proper_divisors)
 4  end

1|debug&gt; u 3 # step (u)ntil line 3
In sum_of_divisors(n) at REPL[2]:1
 1  function sum_of_divisors(n)
 2      divisors = filter(x -&gt; n % x == 0, 1:n)
&gt;3      return sum(divisors)
 4  end

About to run: (sum)([1, 2, 4])</code></pre> <p>Once again, we find out that <code>sum_of_divisors&#40;4&#41;</code> incorrectly returned included the number 4 in the list of proper divisors.</p> <h3 id=infiltratorjl ><a href="#infiltratorjl" class=header-anchor >Infiltrator.jl</a></h3> <p><a href="https://github.com/JuliaDebug/Infiltrator.jl">Infiltrator.jl</a> is an alternative to Debugger.jl which allows you to set breakpoints in your code using the <code>@infiltrate</code> macro. Calling a function which hits a breakpoint will activate the Infiltrator REPL-mode and change the prompt to <code>infil&gt;</code>.</p> <p>Similar to Debugger.jl, Infilitrator provides its own set of commands, which can be shown by typing <code>?</code> in Infiltrator-mode. In the following example, we use the <code>@locals</code> command to print all local variables:</p> <pre><code class="julia-repl hljs"><span class="hljs-meta prompt_">julia&gt;</span><span class=language-julia > <span class=hljs-keyword >using</span> Infiltrator
</span>
<span class="hljs-meta prompt_">julia&gt;</span><span class=language-julia > <span class=hljs-keyword >function</span> sum_of_divisors(n)
           proper_divisors = filter(x -&gt; n % x == <span class=hljs-number >0</span>, <span class=hljs-number >1</span>:n)
           <span class=hljs-meta >@infiltrate</span>
           <span class=hljs-keyword >return</span> sum(proper_divisors)
       <span class=hljs-keyword >end</span>
</span>sum_of_divisors (generic function with 1 method)

<span class="hljs-meta prompt_">julia&gt;</span><span class=language-julia > sum_of_divisors(<span class=hljs-number >4</span>)
</span>Infiltrating (on thread 1) sum_of_divisors(n::Int64)
  at REPL[14]:3

infil&gt; @locals
- n::Int64 = 4
- proper_divisors::Vector{Int64} = [1, 2, 4]</code></pre> <p>Again, we find out that <code>sum_of_divisors&#40;4&#41;</code> incorrectly included the number 4 in <code>proper_divisors</code>.</p> <h2 id=logging ><a href="#logging" class=header-anchor >Logging</a></h2> <p>We&#39;ve been using the logging macro <code>@info</code> frequently in this lecture. Three other logging macros exist: <code>@warn</code>, <code>@error</code> and <code>@debug</code>. We will demonstrate the use of the <code>@debug</code> macro on the example from the previous section:</p> <pre><code class="julia hljs"><span class=hljs-comment ># Content of logging.jl</span>

<span class=hljs-keyword >function</span> sum_of_divisors(n)
    proper_divisors = filter(x -&gt; n % x == <span class=hljs-number >0</span>, <span class=hljs-number >1</span>:n)
    <span class=hljs-meta >@debug</span> <span class=hljs-string >&quot;sum_of_divisors&quot;</span> n proper_divisors
    <span class=hljs-keyword >return</span> sum(proper_divisors)
<span class=hljs-keyword >end</span>

sum_of_divisors(<span class=hljs-number >4</span>) <span class=hljs-comment ># function call</span></code></pre> <h3 id=enabling_debug_messages ><a href="#enabling_debug_messages" class=header-anchor >Enabling <code>@debug</code> messages</a></h3> <p>By default, <code>@debug</code> messages are suppressed. Running the <code>logging.jl</code> file from the command line therefore doesn&#39;t output anything:</p> <pre><code class="bash hljs">$ julia logging.jl
<span class=hljs-comment ># No output!</span></code></pre> <p>Debug logging can be enabled through the <code>JULIA_DEBUG</code> environment variable by specifying the module name, e.g. <code>Main</code>. We can either do this by setting an environment variable or by prefixing our command-line call to <code>julia</code>. </p> <pre><code class="bash hljs">$ JULIA_DEBUG=Main julia logging.jl
┌ Debug: sum_of_divisors
│   n = 4
│   proper_divisors =
│    3-element Vector{Int64}:
│     1
│     2
│     4
└ @ Main ~/logging.jl:9</code></pre> <p>This correctly logged our debug message as well as the source file and line of code on which it was called.</p> <p>Environment variables can also be set inside of your Julia source code, e.g. by adding the following line to the top of the <code>logging.jl</code> file:</p> <pre><code class="julia hljs"><span class=hljs-literal >ENV</span>[<span class=hljs-string >&quot;JULIA_DEBUG&quot;</span>] = Main</code></pre>
<h3 id=saving_logs_to_a_file ><a href="#saving_logs_to_a_file" class=header-anchor >Saving logs to a file</a></h3>
<p>Using the Logging.jl module from Julia base, we can create a  <a href="https://docs.julialang.org/en/v1/stdlib/Logging/#Logging.SimpleLogger"><code>SimpleLogger</code></a> which writes logging messages to an IO object, which can be a text file.</p>
<pre><code class="julia hljs"><span class=hljs-keyword >using</span> Logging

io = open(<span class=hljs-string >&quot;log.txt&quot;</span>, <span class=hljs-string >&quot;w+&quot;</span>) <span class=hljs-comment ># open text file for writing</span>
logger = SimpleLogger(io)  <span class=hljs-comment ># simplistic logger that writes into IO-Stream (e.g. our file)</span>

<span class=hljs-keyword >function</span> sum_of_divisors(n)
    proper_divisors = filter(x -&gt; n % x == <span class=hljs-number >0</span>, <span class=hljs-number >1</span>:n)
    <span class=hljs-meta >@debug</span> <span class=hljs-string >&quot;sum_of_divisors&quot;</span> n proper_divisors
    <span class=hljs-keyword >return</span> sum(proper_divisors)
<span class=hljs-keyword >end</span>

<span class=hljs-comment ># Call function with logger</span>
with_logger(logger) <span class=hljs-keyword >do</span>
    sum_of_divisors(<span class=hljs-number >4</span>)
<span class=hljs-keyword >end</span>

<span class=hljs-comment ># Write buffered messages to file</span>
flush(io)
close(io)</code></pre>
<p>Calling this with the <code>JULIA_DEBUG&#61;Main</code> environment variable successfully creates a <code>log.txt</code> file:</p>
<pre><code class="bash hljs">$ <span class=hljs-built_in >cat</span> log.txt
┌ Debug: sum_of_divisors
│   n = 4
│   proper_divisors =
│    3-element Vector{Int64}:
│     1
│     2
│     4
└ @ Main /Users/funks/.julia/dev/DebugTestPackage/src/logging.jl:14</code></pre>
<p>If we don&#39;t just want to log a single function call, we can also create a <code>global_logger</code>:</p>
<pre><code class="julia hljs"><span class=hljs-keyword >using</span> Logging

io = open(<span class=hljs-string >&quot;log.txt&quot;</span>, <span class=hljs-string >&quot;w+&quot;</span>) <span class=hljs-comment ># open text file for writing</span>
logger = SimpleLogger(io)  <span class=hljs-comment ># simplistic logger that writes into IO-Stream (e.g. our file)</span>
global_logger(logger)      <span class=hljs-comment ># use `logger` as global logger</span>

<span class=hljs-keyword >function</span> sum_of_divisors(n)
    proper_divisors = filter(x -&gt; n % x == <span class=hljs-number >0</span>, <span class=hljs-number >1</span>:n)
    <span class=hljs-meta >@debug</span> <span class=hljs-string >&quot;sum_of_divisors&quot;</span> n proper_divisors
    <span class=hljs-keyword >return</span> sum(proper_divisors)
<span class=hljs-keyword >end</span>

sum_of_divisors(<span class=hljs-number >4</span>) <span class=hljs-comment ># all function calls are logged</span>

<span class=hljs-comment ># Write buffered messages to file</span>
flush(io)
close(io)</code></pre>

<div class="admonition warning">
  <p class=admonition-title >Logging debug messages</p>
  <p>Logging messages from the <code>@debug</code> macro always requires
  setting the <code>JULIA_DEBUG</code> environment variable.</p>
</div>

<h2 id=acknowledgements ><a href="#acknowledgements" class=header-anchor >Acknowledgements</a></h2>
<p>The code snippet was adapted from Ole Kröger&#39;s blog post  <a href="https://opensourc.es/blog/basics-debugging/"><em>&quot;Debugging in Julia - Two different ways&quot;</em></a>.</p>
<div class=page-foot >
    
    Last modified: <a href="https://github.com/adrhill/julia-ml-course/commits/main">August 25, 2025.</a><br>
    Website, code and notebooks are under <a href="https://github.com/adrhill/julia-ml-course/blob/main/LICENSE">MIT License</a> &copy; <a href="http://adrianhill.de">Adrian Hill</a>.<br>
    Built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>, <a href="https://github.com/fonsp/Pluto.jl">Pluto.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
</div>
</div>
    </div>  
    
        



    
    
        <script src="/julia-ml-course/libs/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();hljs.configure({tabReplace: '    '});</script>