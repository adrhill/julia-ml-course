<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/julia-ml-course/libs/highlight/styles/github.min.css"> <link rel=stylesheet  href="/julia-ml-course/css/franklin.css"> <link rel=stylesheet  href="/julia-ml-course/css/poole_hyde.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 768px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <link rel=icon  href="/julia-ml-course/assets/favicon.png"> <title>Package tests</title> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <h1><a href="/julia-ml-course/">JuML</a></h1> <p class=lead > Julia Programming<br> for Machine Learning<br> SoSe 2025 @ TU Berlin.</p> </div> <div class=sidebar-nav-section >Course overview</div> <a class="sidebar-nav-item " href="/julia-ml-course/">General Information</a> <a class="sidebar-nav-item " href="/julia-ml-course/E1_Installation/">Installation</a> <a class="sidebar-nav-item " href="/julia-ml-course/E2_Help/">Getting Help</a> <div class=sidebar-nav-section >Julia basics</div> <a class="sidebar-nav-item " href="/julia-ml-course/L1_Basics_1/">Types, Functions & MD</a> <a class="sidebar-nav-item " href="/julia-ml-course/L2_Basics_2/">Arrays & Linear Algebra</a> <a class="sidebar-nav-item " href="/julia-ml-course/L4_Basics_3/">Custom Types</a> <div class=sidebar-nav-section >Julia ecosystem</div> <a class="sidebar-nav-item " href="/julia-ml-course/L3_Plotting/">Plotting & DataFrames</a> <a class="sidebar-nav-item " href="/julia-ml-course/L5_Machine_Learning/">Machine Learning</a> <a class="sidebar-nav-item " href="/julia-ml-course/L6_Automatic_Differentiation/">Automatic Differentiation</a> <a class="sidebar-nav-item " href="/julia-ml-course/L7_Deep_Learning/">Deep Learning</a> <div class=sidebar-nav-section >Workflows</div> <a class="sidebar-nav-item " href="/julia-ml-course/overview/">Overview</a> <a class="sidebar-nav-item " href="/julia-ml-course/environments/">Environments</a> <a class="sidebar-nav-item " href="/julia-ml-course/repl/">Enhancing the REPL</a> <a class="sidebar-nav-item " href="/julia-ml-course/setup/">Setting up a Package</a> <a class="sidebar-nav-item " href="/julia-ml-course/write/">Writing a Package</a> <a class="sidebar-nav-item active" href="/julia-ml-course/test/">Testing</a> <a class="sidebar-nav-item " href="/julia-ml-course/git/">Hosting on GitHub</a> <a class="sidebar-nav-item " href="/julia-ml-course/docs/">Documentation</a> <a class="sidebar-nav-item " href="/julia-ml-course/debugging/">Debugging</a> <a class="sidebar-nav-item " href="/julia-ml-course/profiling/">Profiling</a> <a class="sidebar-nav-item " href="/julia-ml-course/scripts/">Scripts & Experiments</a> <a class="sidebar-nav-item " href="/julia-ml-course/common-mistakes/">Common Mistakes</a> <div class=sidebar-nav-section >Homework</div> <a class="sidebar-nav-item " href="/julia-ml-course/H1_Basics/">Week 1</a> <a class="sidebar-nav-item " href="/julia-ml-course/H2_Linear_Algebra/">Week 2</a> <a class="sidebar-nav-item " href="/julia-ml-course/H3_Custom_Types/">Week 3</a> <a class="sidebar-nav-item " href="/julia-ml-course/H4_Deep_Learning/">Week 4</a> </nav> <br> </div> </div> <div class="content container"> <div class=franklin-content ><h1 id=package_tests ><a href="#package_tests" class=header-anchor >Package tests</a></h1> <p>In this section, we add tests to the package we started in <a href="/julia-ml-course/write"><em>&quot;Writing a Julia package&quot;</em></a>.</p> <p> <h2>Table of Contents</h2> <div class=franklin-toc ><ol><li><a href="#running_tests">Running tests</a><li><a href="#adding_tests">Adding tests</a><li><a href="#adding_test_dependencies">Adding test dependencies</a><li><a href="#organizing_your_tests">Organizing your tests</a><li><a href="#advanced_testing_workflows">Advanced testing workflows</a><li><a href="#further_reading">Further reading</a></ol></div></p> <h2 id=running_tests ><a href="#running_tests" class=header-anchor >Running tests</a></h2> <p>By convention, package tests are located in a folder called <code>test</code>. The &quot;main&quot; file that includes all other tests is called <code>runtests.jl</code>.</p> <pre><code class="julia hljs"><span class=hljs-comment ># Contents of test/runtests.jl</span>
<span class=hljs-keyword >using</span> MyPackage
<span class=hljs-keyword >using</span> Test

<span class=hljs-meta >@testset</span> <span class=hljs-string >&quot;MyPackage.jl&quot;</span> <span class=hljs-keyword >begin</span>
    <span class=hljs-comment ># Write your tests here.</span>
<span class=hljs-keyword >end</span></code></pre> <p>To run your test suite, enter Pkg-mode and write <code>test</code>: </p> <pre><code class="julia-repl hljs"><span class="hljs-meta prompt_">julia&gt;</span><span class=language-julia > <span class=hljs-comment ># type ] to enter Pkg mode</span>
</span>
<span class=hljs-metap>(MyPackage) pkg&gt;</span> test
    Testing MyPackage
      Status `/private/var/folders/74/wcz8c9qs5dzc8wgkk7839k5c0000gn/T/jl_TcJkwR/Project.toml`

     ... # Julia resolves a temporary environment from scratch
    
     Testing Running tests...
Test Summary: |Time
MyPackage.jl  | None  0.0s
     Testing MyPackage tests passed</code></pre> <p>All of our tests pass since <strong>we don&#39;t have any</strong> that could fail&#33;</p> <h2 id=adding_tests ><a href="#adding_tests" class=header-anchor >Adding tests</a></h2> <p>Using the <a href="https://docs.julialang.org/en/v1/stdlib/Test/">Test.jl</a> package from the Julia standard library, we can add tests to our package:</p> <ul> <li><p><code>@test</code> macros evaluate whether the expression next to them is <code>true</code>. If it isn&#39;t, the test failed.</p> <li><p><code>@testset</code> macros are used to organize and name your tests. Test-sets can be arbitrarily nested and can contain multiple tests and test-sets. You can even put them into for-loops and other control-flow structures.</p> </ul> <pre><code class="julia hljs"><span class=hljs-comment ># New contents of test/runtests.jl</span>
<span class=hljs-keyword >using</span> MyPackage
<span class=hljs-keyword >using</span> Test

<span class=hljs-meta >@testset</span> <span class=hljs-string >&quot;MyPackage.jl&quot;</span> <span class=hljs-keyword >begin</span>
    <span class=hljs-meta >@testset</span> <span class=hljs-string >&quot;timestwo&quot;</span> <span class=hljs-keyword >begin</span>
      <span class=hljs-meta >@test</span> timestwo(<span class=hljs-number >4.0</span>) == <span class=hljs-number >8.0</span>
    <span class=hljs-keyword >end</span>
<span class=hljs-keyword >end</span></code></pre> <p>Let&#39;s run our new test suite:</p> <pre><code class="julia-repl hljs"><span class=hljs-metap>(MyPackage) pkg&gt;</span> test
     Testing Running tests...
Test Summary: | Pass  Total  Time
MyPackage.jl  |    1      1  0.0s
     Testing MyPackage tests passed</code></pre> <p>To compare floating point numbers, which may contain numerical rounding errors, use <code>isapprox</code> or <code>â‰ˆ</code> &#40;<code>\approx&lt;TAB&gt;</code>&#41; instead of <code>&#61;&#61;</code>. The <code>isapprox</code> function allows you to specify absolute and relative numerical tolerances.</p> <h2 id=adding_test_dependencies ><a href="#adding_test_dependencies" class=header-anchor >Adding test dependencies</a></h2> <p>Your <code>test</code> folder contains its own Julia environment, defined in <code>test/Project.toml</code>. To add additional test dependencies, first activate your test environment and add dependencies using Pkg as usual:</p> <pre><code class="julia-repl hljs"><span class="hljs-meta prompt_">julia&gt;</span><span class=language-julia > <span class=hljs-comment ># type ] to enter Pkg mode</span>
</span>
<span class=hljs-metap>(MyPackage) pkg&gt;</span> activate test
  Activating project at `~/.julia/dev/MyPackage/test`

<span class=hljs-metap>(test) pkg&gt;</span> add Flux # adding Flux as an example</code></pre> <p>Once a dependency has been added, it can be used in your test suite.</p> <pre><code class="julia hljs"><span class=hljs-comment ># New contents of test/runtests.jl</span>
<span class=hljs-keyword >using</span> MyPackage
<span class=hljs-keyword >using</span> Test

<span class=hljs-keyword >using</span> Flux <span class=hljs-comment ># use new dependency </span>

<span class=hljs-meta >@testset</span> <span class=hljs-string >&quot;MyPackage.jl&quot;</span> <span class=hljs-keyword >begin</span>
    <span class=hljs-meta >@testset</span> <span class=hljs-string >&quot;timestwo&quot;</span> <span class=hljs-keyword >begin</span>
      <span class=hljs-meta >@test</span> timestwo(<span class=hljs-number >4.0</span>) == <span class=hljs-number >8.0</span>
      ... <span class=hljs-comment ># other tests using Flux</span>
    <span class=hljs-keyword >end</span>
<span class=hljs-keyword >end</span></code></pre> <h2 id=organizing_your_tests ><a href="#organizing_your_tests" class=header-anchor >Organizing your tests</a></h2> <p>Just like your source code, your test suite can be organized into several smaller files using the <code>include</code> function. It is good practice to include <strong>all</strong> required dependencies <strong>in each</strong> of these files, as we will see in the next section.</p> <pre><code class="julia hljs"><span class=hljs-comment ># New test file `test/test_timestwo.jl`</span>
<span class=hljs-keyword >using</span> MyPackage
<span class=hljs-keyword >using</span> Test
<span class=hljs-keyword >using</span> Flux

<span class=hljs-meta >@testset</span> <span class=hljs-string >&quot;timestwo&quot;</span> <span class=hljs-keyword >begin</span>
    <span class=hljs-meta >@test</span> timestwo(<span class=hljs-number >4.0</span>) == <span class=hljs-number >8.0</span>
    ... <span class=hljs-comment ># other tests using Flux</span>
<span class=hljs-keyword >end</span></code></pre> <pre><code class="julia hljs"><span class=hljs-comment ># New contents of test/runtests.jl</span>
<span class=hljs-keyword >using</span> MyPackage
<span class=hljs-keyword >using</span> Test

<span class=hljs-meta >@testset</span> <span class=hljs-string >&quot;MyPackage.jl&quot;</span> <span class=hljs-keyword >begin</span>
    include(<span class=hljs-string >&quot;test_timestwo.jl&quot;</span>) <span class=hljs-comment ># &lt;--- include tests in runtests.jl</span>
<span class=hljs-keyword >end</span></code></pre> <h2 id=advanced_testing_workflows ><a href="#advanced_testing_workflows" class=header-anchor >Advanced testing workflows</a></h2> <div class="admonition tip"><p class=admonition-title >Tip</p><p>The following workflow is completely optional but useful on large projects.</p> </div> <p>Every time you run your tests through Pkg&#39;s <code>test</code> command, Julia resolves a fresh virtual environment for testing. It also runs the <strong>entire</strong> test suite. This is great for the purpose of reproducibility but it can waste a lot of time when you want to quickly iterate on a project with many dependencies.</p> <p>The <a href="https://github.com/JuliaTesting/TestEnv.jl">TestEnv.jl</a> package allows you to activate a copy of your test environment using the function <code>TestEnv.activate&#40;&#41;</code>. By adding <code>using TestEnv</code> to your <a href="/julia-ml-course/repl">startup file</a>, it is always available to you.</p> <p>Once you activated your test environment, you can manually include individual test files. This is the reason why it is good practice to include all required dependencies in each test file.</p> <pre><code class="julia-repl hljs"><span class="hljs-meta prompt_">julia&gt;</span><span class=language-julia > TestEnv.activate()
</span>&quot;/var/folders/lx/07x6z_b908gd4wd3v_wf2b4c0000gn/T/jl_jsA8yy/Project.toml&quot;

<span class=hljs-metap>(jl_jsA8yy) pkg&gt;</span>  # new copy of your test environment

<span class="hljs-meta prompt_">julia&gt;</span><span class=language-julia > include(<span class=hljs-string >&quot;test/test_timestwo.jl&quot;</span>); <span class=hljs-comment ># run only one test file</span>
</span>Test Summary: | Pass  Total  Time
timestwo      |    1      1  0.1s</code></pre> <p>Using <a href="/julia-ml-course/repl">OhMyREPL</a>, you can move through your REPL history using the up and down arrow keys. This allows you to quickly re-run your tests by calling your previous command <code>include&#40;&quot;test/test_timestwo.jl&quot;&#41;;</code> again.</p> <h2 id=further_reading ><a href="#further_reading" class=header-anchor >Further reading</a></h2> <ul> <li><p><a href="https://docs.julialang.org/en/v1/stdlib/Test/">Test.jl documentation</a></p> <li><p><a href="https://modernjuliaworkflows.github.io/sharing/#testing"><em>Modern Julia Workflows</em> on testing</a></p> </ul> <div class=page-foot > Last modified: <a href="https://github.com/adrhill/julia-ml-course/commits/main">August 25, 2025.</a><br> Website, code and notebooks are under <a href="https://github.com/adrhill/julia-ml-course/blob/main/LICENSE">MIT License</a> &copy; <a href="http://adrianhill.de">Adrian Hill</a>.<br> Built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>, <a href="https://github.com/fonsp/Pluto.jl">Pluto.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> <script src="/julia-ml-course/libs/highlight/highlight.min.js"></script> <script>hljs.highlightAll();hljs.configure({tabReplace: ' '});</script>