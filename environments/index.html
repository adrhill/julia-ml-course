<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/julia-ml-course/libs/highlight/styles/github.min.css"> <link rel=stylesheet  href="/julia-ml-course/css/franklin.css"> <link rel=stylesheet  href="/julia-ml-course/css/poole_hyde.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 768px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <link rel=icon  href="/julia-ml-course/assets/favicon.png"> <title>Julia for Machine Learning</title> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <h1><a href="/julia-ml-course/">JuML</a></h1> <p class=lead > Julia Programming<br> for Machine Learning<br> SoSe 2025 @ TU Berlin.</p> </div> <div class=sidebar-nav-section >Course overview</div> <a class="sidebar-nav-item " href="/julia-ml-course/">General Information</a> <a class="sidebar-nav-item " href="/julia-ml-course/E1_Installation/">Installation</a> <a class="sidebar-nav-item " href="/julia-ml-course/E2_Help/">Getting Help</a> <div class=sidebar-nav-section >Julia basics</div> <a class="sidebar-nav-item " href="/julia-ml-course/L1_Basics_1/">Types, Functions & MD</a> <a class="sidebar-nav-item " href="/julia-ml-course/L2_Basics_2/">Arrays & Linear Algebra</a> <a class="sidebar-nav-item " href="/julia-ml-course/L4_Basics_3/">Custom Types</a> <div class=sidebar-nav-section >Julia ecosystem</div> <a class="sidebar-nav-item " href="/julia-ml-course/L3_Plotting/">Plotting & DataFrames</a> <a class="sidebar-nav-item " href="/julia-ml-course/L5_Machine_Learning/">Machine Learning</a> <a class="sidebar-nav-item " href="/julia-ml-course/L6_Automatic_Differentiation/">Automatic Differentiation</a> <a class="sidebar-nav-item " href="/julia-ml-course/L7_Deep_Learning/">Deep Learning</a> <div class=sidebar-nav-section >Workflows</div> <a class="sidebar-nav-item " href="/julia-ml-course/overview/">Overview</a> <a class="sidebar-nav-item active" href="/julia-ml-course/environments/">Environments</a> <a class="sidebar-nav-item " href="/julia-ml-course/repl/">Enhancing the REPL</a> <a class="sidebar-nav-item " href="/julia-ml-course/setup/">Setting up a Package</a> <a class="sidebar-nav-item " href="/julia-ml-course/write/">Writing a Package</a> <a class="sidebar-nav-item " href="/julia-ml-course/test/">Testing</a> <a class="sidebar-nav-item " href="/julia-ml-course/git/">Hosting on GitHub</a> <a class="sidebar-nav-item " href="/julia-ml-course/docs/">Documentation</a> <a class="sidebar-nav-item " href="/julia-ml-course/debugging/">Debugging</a> <a class="sidebar-nav-item " href="/julia-ml-course/profiling/">Profiling</a> <a class="sidebar-nav-item " href="/julia-ml-course/scripts/">Scripts & Experiments</a> <a class="sidebar-nav-item " href="/julia-ml-course/common-mistakes/">Common Mistakes</a> <div class=sidebar-nav-section >Homework</div> <a class="sidebar-nav-item " href="/julia-ml-course/H1_Basics/">Week 1</a> <a class="sidebar-nav-item " href="/julia-ml-course/H2_Linear_Algebra/">Week 2</a> <a class="sidebar-nav-item " href="/julia-ml-course/H3_Custom_Types/">Week 3</a> <a class="sidebar-nav-item " href="/julia-ml-course/H4_Deep_Learning/">Week 4</a> </nav> <br> </div> </div> <div class="content container"> <div class=franklin-content ><h1 id=environments ><a href="#environments" class=header-anchor >Environments</a></h1> <p>Environments play an important role in managing dependencies within programming projects. In this lecture, we will talk about why they are needed, how they are created and how they are defined.</p> <p> <h2>Table of Contents</h2> <div class=franklin-toc ><ol><li><a href="#what_are_environments">What are environments?</a><li><a href="#creating_a_new_virtual_environment">Creating a new virtual environment</a><li><a href="#structure_of_a_julia_environment">Structure of a Julia environment</a><ol><li><a href="#projecttoml"><code>Project.toml</code></a><li><a href="#manifesttoml"><code>Manifest.toml</code></a></ol><li><a href="#why_should_i_use_environments">Why should I use environments?</a><ol><li><a href="#reason_1_reproducibility">Reason 1: Reproducibility</a><li><a href="#reason_2_avoid_dependency_conflicts">Reason 2: Avoid dependency conflicts</a><li><a href="#reason_3_avoid_polluting_your_global_environment">Reason 3: Avoid polluting your global environment</a><li><a href="#reason_4_simplify_troubleshooting">Reason 4: Simplify troubleshooting</a><li><a href="#reason_5_environments_include_binaries">Reason 5: Environments include binaries</a></ol><li><a href="#temporary_environments">Temporary environments</a><li><a href="#environments_in_pluto">Environments in Pluto</a><li><a href="#further_reading">Further reading</a></ol></div></p> <h2 id=what_are_environments ><a href="#what_are_environments" class=header-anchor >What are environments?</a></h2> <p>An environment is an isolated workspace containing dependencies &#40;external packages you are using&#41;:</p> <ul> <li><p>For a small ML project, you might want to define an environment that includes <em>MLDatasets.jl</em> and <em>Flux.jl</em>.</p> <li><p>For an image processing project, you might want to define an environment containing <em>Images.jl</em> and <em>LinearAlgebra.jl</em>.</p> </ul> <p>Environments are managed by Julia&#39;s package manager <strong>Pkg</strong> and defined in two files called the <code>Project.toml</code> and the <code>Manifest.toml</code>.</p> <h2 id=creating_a_new_virtual_environment ><a href="#creating_a_new_virtual_environment" class=header-anchor >Creating a new virtual environment</a></h2> <p>To create a new environment, enter Pkg-mode in the Julia REPL by typing <code>&#93;</code>, then type <code>activate</code> followed by the name of the environment you want to create.</p> <p>Let&#39;s create a new environment called <code>MyDeepLearningEnv</code> that includes <em>MLDatasets.jl</em> and <em>Flux.jl</em>:</p> <pre><code class="julia-repl hljs"><span class=hljs-metap>(@v1.11) pkg&gt;</span> activate MyDeepLearningEnv            # create environment
  Activating new project at `~/MyDeepLearningEnv`

<span class=hljs-metap>(@MyDeepLearningEnv) pkg&gt;</span>                           # environment is active</code></pre> <p>The printout informs us that this created a new project folder at <code>~/MyDeepLearningEnv</code>. The exact path depends on the folder in which you launched the Julia REPL. In this case, I opened Julia in my home directory, which is called <code>~</code> on Linux and macOS.</p> <p>The project folder <code>MyDeepLearningEnv</code> contains a <code>Project.toml</code> and a <code>Manifest.toml</code>. Adding packages to this environment will update both of these files:</p> <pre><code class="julia-repl hljs"><span class=hljs-metap>(MyDeepLearningEnv) pkg&gt;</span> add Flux, MLDatasets
   Resolving package versions...
   Installed ProgressLogging ‚îÄ v0.1.4
   Installed Functors ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ v0.4.10
   Installed Optimisers ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ v0.3.3
   Installed OneHotArrays ‚îÄ‚îÄ‚îÄ‚îÄ v0.2.5
   Installed Flux ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ v0.14.15
    Updating `~/MyDeepLearningEnv/Project.toml`   # &lt;---
  [587475ba] + Flux v0.14.15
  [eb30cadb] + MLDatasets v0.7.14
    Updating `~/MyDeepLearningEnv/Manifest.toml`  # &lt;---
  [621f4979] + AbstractFFTs v1.5.0
  [79e6a3ab] + Adapt v4.0.4
  [dce04be8] + ArgCheck v2.3.0
  [a9b6321e] + Atomix v0.1.0
  [a963bdd2] + AtomsBase v0.3.5
  ...</code></pre> <p>We can check the packages in our environment by typing <code>status</code> or <code>st</code> in Pkg-mode:</p> <pre><code class="julia-repl hljs"><span class=hljs-metap>(MyDeepLearningEnv) pkg&gt;</span> status
Status `~/MyDeepLearningEnv/Project.toml`
  [587475ba] Flux v0.14.15
  [eb30cadb] MLDatasets v0.7.14</code></pre> <h2 id=structure_of_a_julia_environment ><a href="#structure_of_a_julia_environment" class=header-anchor >Structure of a Julia environment</a></h2> <h3 id=projecttoml ><a href="#projecttoml" class=header-anchor ><code>Project.toml</code></a></h3> <p>Let&#39;s first take a look at contents of the <code>Project.toml</code>. In a second terminal, move to your project folder using <code>cd</code> &#40;<strong>c</strong>hange <strong>d</strong>irectory&#41;, then look at the file contents in your terminal using the command <code>cat Project.toml</code> &#40;con<strong>cat</strong>enate&#41;, or open the file in your favorite editor:</p> <pre><code class="toml hljs"><span class=hljs-section >[deps]</span>
<span class=hljs-attr >Flux</span> = <span class=hljs-string >&quot;587475ba-b771-5e3f-ad9e-33799f191a9c&quot;</span>
<span class=hljs-attr >MLDatasets</span> = <span class=hljs-string >&quot;eb30cadb-4394-5ae3-aed4-317e484a6458&quot;</span></code></pre> <p>In the case of our environment, the <code>Project.toml</code> just contains a list of the installed packages we would expect: Flux and MLDatasets. They are followed by a string called a <em>&quot;universally unique identifiers&quot;</em> &#40;UUIDs&#41;, which we can ignore for now.</p> <p>As we will see in the lesson on <a href="/julia-ml-course/write">writing a package</a>, the <code>Project.toml</code> contains more information when used in packages.</p> <h3 id=manifesttoml ><a href="#manifesttoml" class=header-anchor ><code>Manifest.toml</code></a></h3> <p>Let&#39;s look at our Manifest using <code>cat Manifest.toml</code>:</p> <pre><code class="toml hljs"><span class=hljs-comment ># This file is machine-generated - editing it directly is not advised</span>

<span class=hljs-attr >julia_version</span> = <span class=hljs-string >&quot;1.11.5&quot;</span>
<span class=hljs-attr >manifest_format</span> = <span class=hljs-string >&quot;2.0&quot;</span>
<span class=hljs-attr >project_hash</span> = <span class=hljs-string >&quot;9aea089894f46207e0e51b9ad88b65d90b4230ac&quot;</span>

<span class=hljs-section >[[deps.AbstractFFTs]]</span>
<span class=hljs-attr >deps</span> = [<span class=hljs-string >&quot;LinearAlgebra&quot;</span>]
<span class=hljs-attr >git-tree-sha1</span> = <span class=hljs-string >&quot;d92ad398961a3ed262d8bf04a1a2b8340f915fef&quot;</span>
<span class=hljs-attr >uuid</span> = <span class=hljs-string >&quot;621f4979-c628-5d54-868e-fcf4e3e8185c&quot;</span>
<span class=hljs-attr >version</span> = <span class=hljs-string >&quot;1.5.0&quot;</span>
<span class=hljs-attr >weakdeps</span> = [<span class=hljs-string >&quot;ChainRulesCore&quot;</span>, <span class=hljs-string >&quot;Test&quot;</span>]

    <span class=hljs-section >[deps.AbstractFFTs.extensions]</span>
    <span class=hljs-attr >AbstractFFTsChainRulesCoreExt</span> = <span class=hljs-string >&quot;ChainRulesCore&quot;</span>
    <span class=hljs-attr >AbstractFFTsTestExt</span> = <span class=hljs-string >&quot;Test&quot;</span>

<span class=hljs-section >[[deps.Adapt]]</span>
<span class=hljs-attr >deps</span> = [<span class=hljs-string >&quot;LinearAlgebra&quot;</span>, <span class=hljs-string >&quot;Requires&quot;</span>]
<span class=hljs-attr >git-tree-sha1</span> = <span class=hljs-string >&quot;6a55b747d1812e699320963ffde36f1ebdda4099&quot;</span>
<span class=hljs-attr >uuid</span> = <span class=hljs-string >&quot;79e6a3ab-5dfb-504d-930d-738a2a938a0e&quot;</span>
<span class=hljs-attr >version</span> = <span class=hljs-string >&quot;4.0.4&quot;</span>
<span class=hljs-attr >weakdeps</span> = [<span class=hljs-string >&quot;StaticArrays&quot;</span>]

    <span class=hljs-section >[deps.Adapt.extensions]</span>
    <span class=hljs-attr >AdaptStaticArraysExt</span> = <span class=hljs-string >&quot;StaticArrays&quot;</span>

<span class=hljs-section >[[deps.ArgCheck]]</span>
<span class=hljs-attr >git-tree-sha1</span> = <span class=hljs-string >&quot;a3a402a35a2f7e0b87828ccabbd5ebfbebe356b4&quot;</span>
<span class=hljs-attr >uuid</span> = <span class=hljs-string >&quot;dce04be8-c92d-5529-be00-80e4d2c0e197&quot;</span>
<span class=hljs-attr >version</span> = <span class=hljs-string >&quot;2.3.0&quot;</span>
...</code></pre> <p>The Manifest is a much longer file than the <code>Project.toml</code>. Mine contains 1267 lines of code, even though we just added two dependencies: Flux and MLDatasets How is this possible?</p> <p>This is due to the fact that the Manifest lists all packages in the dependency tree. Not only Flux and MLDatasets, but also their dependencies, the dependencies of their dependencies, and so on. For packages that are not part of Julia Base, Git tree hashes and versions are specified. The Manifest even includes external binaries &#40;e.g. compiled C, C&#43;&#43; and Fortran programs&#41; that might be required.</p> <p><strong>This makes our environment fully reproducible&#33;</strong></p> <h2 id=why_should_i_use_environments ><a href="#why_should_i_use_environments" class=header-anchor >Why should I use environments?</a></h2> <h3 id=reason_1_reproducibility ><a href="#reason_1_reproducibility" class=header-anchor >Reason 1: Reproducibility</a></h3> <p>In the sciences, reproducibility is of utmost importance to validate research findings and improve reliability. The environment of a project can be shared with others by providing a <code>Project.toml</code> and <code>Manifest.toml</code> . This ensures that people will use the exact same dependencies as you did. Changes in future releases of a package won&#39;t affect your results.</p> <h3 id=reason_2_avoid_dependency_conflicts ><a href="#reason_2_avoid_dependency_conflicts" class=header-anchor >Reason 2: Avoid dependency conflicts</a></h3> <p>As we will see in our lecture on <a href="/julia-ml-course/write">writing packages</a>, packages can set lower and upper bounds on versions of their dependencies. This is useful since developers don&#39;t know whether future releases of their dependencies will be compatible with their code.</p> <p>Let&#39;s imagine a scenario where Flux and MLDatasets both have a common dependency on a third package Foo.jl. When creating an environment, Pkg will look at the acceptable versions of Foo for both Flux and MLDataset and compute the intersection of acceptable versions. This is called <em>resolving dependencies</em>.</p> <h3 id=reason_3_avoid_polluting_your_global_environment ><a href="#reason_3_avoid_polluting_your_global_environment" class=header-anchor >Reason 3: Avoid polluting your global environment</a></h3> <p>The more packages are installed in one environment, the harder it gets to resolve dependencies, and the more likely you are to use outdated versions of packages.</p> <p>For this reason, you should use separate environments for each project instead of installing everything into your global <code>&#40;@v1.11&#41;</code> environment. To show which of your dependencies are outdated, run <code>status --outdated</code> in Pkg-mode.</p> <h3 id=reason_4_simplify_troubleshooting ><a href="#reason_4_simplify_troubleshooting" class=header-anchor >Reason 4: Simplify troubleshooting</a></h3> <p>This point is basically the same as <em>Reason 1</em>: When your code contains a bug, troubleshooting is simplified by making the bug reproducible. When opening an issue on GitHub, it is good practice to provide the following:</p> <ul> <li><p>a description of your problem</p> <li><p>a minimal example reproducing the bug</p> <li><p>the output of Pkg&#39;s <code>status</code></p> <li><p>the output of the <code>versioninfo&#40;&#41;</code> function, which summarizes information about your system and Julia version</p> </ul> <h3 id=reason_5_environments_include_binaries ><a href="#reason_5_environments_include_binaries" class=header-anchor >Reason 5: Environments include binaries</a></h3> <p>Most Julia code is written in pure Julia, but sometimes it is necessary to call external programs which have been compiled to binaries. Binaries are regular packages whose name ends on <code>_jll</code> by convention; for example <code>OpenBLAS_jll</code>, which contains <a href="https://www.openblas.net">OpenBLAS</a> binaries.</p> <p>When installing a Julia package, Pkg automatically downloads and installs all required binaries. Just like any other dependency, they are added to the Manifest and therefore fully reproducible.</p> <h2 id=temporary_environments ><a href="#temporary_environments" class=header-anchor >Temporary environments</a></h2> <p>Temporary environments provide a convenient way to experiment with new packages without affecting your existing project environments. When you want to quickly test a package you&#39;ve discovered on GitHub or elsewhere, the package manager allows you to create an isolated, disposable environment.</p> <p>In your Julia REPL, enter package mode and type <code>activate --temp</code>. This will create an environment with a randomized name in a temporary folder.</p> <pre><code class="julia-repl hljs"><span class=hljs-metap>(@v1.11) pkg&gt;</span> activate --temp
  Activating new project at `/var/folders/74/wcz8c9qs5dzc8wgkk7839k5c0000gn/T/jl_9AGcg1`

<span class=hljs-metap>(jl_9AGcg1) pkg&gt;</span></code></pre> <h2 id=environments_in_pluto ><a href="#environments_in_pluto" class=header-anchor >Environments in Pluto</a></h2> <p>Pluto notebooks also contain reproducible environments. Let&#39;s take a look at the source code of a notebook called <code>empty_pluto.jl</code> that just contains a single cell declaring <code>using LinearAlgebra</code>.</p> <pre><code class="julia hljs"><span class=hljs-comment >### A Pluto.jl notebook ###</span>
<span class=hljs-comment ># v0.19.25</span>

<span class=hljs-keyword >using</span> Markdown
<span class=hljs-keyword >using</span> InteractiveUtils

<span class=hljs-comment ># ‚ïî‚ïê‚ï° 9842a4f5-69d1-4566-b605-49d5c6679b4a</span>
<span class=hljs-keyword >using</span> LinearAlgebra <span class=hljs-comment ># üí° the only cell we added! üí°</span>

<span class=hljs-comment ># ‚ïî‚ïê‚ï° 00000000-0000-0000-0000-000000000001</span>
PLUTO_PROJECT_TOML_CONTENTS = <span class=hljs-string >&quot;&quot;&quot;
[deps]
LinearAlgebra = &quot;37e2e46d-f89d-539d-b4ee-838fcccc9c8e&quot;
&quot;&quot;&quot;</span>
 
<span class=hljs-comment ># ‚ïî‚ïê‚ï° 00000000-0000-0000-0000-000000000002</span>
PLUTO_MANIFEST_TOML_CONTENTS = <span class=hljs-string >&quot;&quot;&quot;
# This file is machine-generated - editing it directly is not advised

julia_version = &quot;1.8.5&quot;
manifest_format = &quot;2.0&quot;
project_hash = &quot;ac1187e548c6ab173ac57d4e72da1620216bce54&quot;

[[deps.Artifacts]]
uuid = &quot;56f22d72-fd6d-98f1-02f0-08ddc0907c33&quot;

[[deps.CompilerSupportLibraries_jll]]
deps = [&quot;Artifacts&quot;, &quot;Libdl&quot;]
uuid = &quot;e66e0078-7015-5450-92f7-15fbd957f2ae&quot;
version = &quot;1.0.1+0&quot;

[[deps.Libdl]]
uuid = &quot;8f399da3-3557-5675-b5ff-fb832c97cbdb&quot;

[[deps.LinearAlgebra]]
deps = [&quot;Libdl&quot;, &quot;libblastrampoline_jll&quot;]
uuid = &quot;37e2e46d-f89d-539d-b4ee-838fcccc9c8e&quot;

[[deps.OpenBLAS_jll]]
deps = [&quot;Artifacts&quot;, &quot;CompilerSupportLibraries_jll&quot;, &quot;Libdl&quot;]
uuid = &quot;4536629a-c528-5b80-bd46-f80d51c5b363&quot;
version = &quot;0.3.20+0&quot;

[[deps.libblastrampoline_jll]]
deps = [&quot;Artifacts&quot;, &quot;Libdl&quot;, &quot;OpenBLAS_jll&quot;]
uuid = &quot;8e850b90-86db-534c-a0d3-1478176c7d93&quot;
version = &quot;5.1.1+0&quot;
&quot;&quot;&quot;</span>

<span class=hljs-comment ># ‚ïî‚ïê‚ï° Cell order:</span>
<span class=hljs-comment ># ‚ï†‚ïê9842a4f5-69d1-4566-b605-49d5c6679b4a</span>
<span class=hljs-comment ># ‚ïü‚îÄ00000000-0000-0000-0000-000000000001</span>
<span class=hljs-comment ># ‚ïü‚îÄ00000000-0000-0000-0000-000000000002</span></code></pre> <p>We can see that</p> <ul> <li><p>A variable called <code>PLUTO_PROJECT_TOML_CONTENTS</code> holds the <code>Project.toml</code> information.</p> <li><p>A variable called <code>PLUTO_MANIFEST_TOML_CONTENTS</code> holds the <code>Manifest.toml</code> information.</p> <li><p>Cells are annotated by a comment <code># ‚ïî‚ïê‚ï° some-uuid</code>.</p> <li><p>The ordering of cells is given in a comment <code># ‚ïî‚ïê‚ï° Cell order:</code> at the end of the file.</p> </ul> <p>Pluto notebooks are therefore fully reproducible and also regular Julia files&#33;</p> <h2 id=further_reading ><a href="#further_reading" class=header-anchor >Further reading</a></h2> <ul> <li><p><a href="https://pkgdocs.julialang.org/v1/environments/">Julia documentation on Working with Environments</a></p> <li><p><a href="https://docs.julialang.org/en/v1/manual/code-loading/#Environments">Julia documentation on Code Loading </a> for advanced users</p> </ul> <div class=page-foot > Last modified: <a href="https://github.com/adrhill/julia-ml-course/commits/main">August 25, 2025.</a><br> Website, code and notebooks are under <a href="https://github.com/adrhill/julia-ml-course/blob/main/LICENSE">MIT License</a> &copy; <a href="http://adrianhill.de">Adrian Hill</a>.<br> Built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>, <a href="https://github.com/fonsp/Pluto.jl">Pluto.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> <script src="/julia-ml-course/libs/highlight/highlight.min.js"></script> <script>hljs.highlightAll();hljs.configure({tabReplace: ' '});</script>